extends layout

block content
  form#procurementForm(
    action=editing ? `/editProduce/${produce._id}` : "/addProduce",
    method="POST",
    class="bg-[#001f3f]/90 shadow-lg shadow-cyan-400/40 rounded-2xl w-[92%] max-w-3xl px-4 py-5 grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-3 text-white text-sm"
  )
    h1.text-xl.font-semibold.col-span-full.text-center.mb-1
      = editing ? `Edit Procurement Record - ${produce.branch} Branch` : `Procurement Form - ${branch} Branch`

    div
      label(for="produceName", class="block mb-1") Name of Produce
      select(name="produceName", id="produceName", class="bg-transparent border-b border-white w-full py-1 text-black focus:outline-none focus:ring-1 focus:ring-cyan-400")
        option(disabled selected hidden)= editing ? produce.produceName : 'Select Produce'
        option(value="Beans", selected=editing && produce.produceName === 'Beans') Beans
        option(value="Grain Maize", selected=editing && produce.produceName === 'Grain Maize') Grain Maize
        option(value="Cowpeas", selected=editing && produce.produceName === 'Cowpeas') Cowpeas
        option(value="G-nuts", selected=editing && produce.produceName === 'G-nuts') G-nuts
        option(value="Soybeans", selected=editing && produce.produceName === 'Soybeans') Soybeans
      span#produceNameError.hidden.text-red-400.text-xs

    div
      label(for="produceType", class="block mb-1") Type of Produce
      select(name="produceType", id="produceType", class="bg-transparent border-b border-white w-full py-1 text-black focus:outline-none focus:ring-1 focus:ring-cyan-400")
        option(disabled selected hidden)= editing ? produce.produceType : 'Select Type'
        option(value="Legumes", selected=editing && produce.produceType === 'Legumes') Legumes
        option(value="Cereals", selected=editing && produce.produceType === 'Cereals') Cereals
      span#produceTypeError.hidden.text-red-400.text-xs

    div
      label(for="date", class="block mb-1") Date
      input(type="date", name="date", id="date", value=editing ? produce.date.toISOString().split('T')[0] : '', class="bg-transparent border-b border-white w-full py-1 text-white focus:outline-none focus:ring-1 focus:ring-cyan-400")
      span#dateError.hidden.text-red-400.text-xs

    div
      label(for="time", class="block mb-1") Time of Produce
      input(type="time", name="time", id="time", value=editing ? produce.time : '', class="bg-transparent border-b border-white w-full py-1 text-white focus:outline-none focus:ring-1 focus:ring-cyan-400")
      span#timeError.hidden.text-red-400.text-xs

    div
      label(for="tonnage", class="block mb-1") Tonnage (kgs)
      input(type="number", name="tonnage", id="tonnage", value=editing ? produce.tonnage : '', class="bg-transparent border-b border-white w-full py-1 focus:outline-none focus:ring-1 focus:ring-cyan-400")
      span#tonnageError.hidden.text-red-400.text-xs

    div
      label(for="cost", class="block mb-1") Unit Price (UGX)
      input(type="number", name="cost", id="cost", value=editing ? produce.cost : '', class="bg-transparent border-b border-white w-full py-1 focus:outline-none focus:ring-1 focus:ring-cyan-400")
      span#costError.hidden.text-red-400.text-xs

    div
      label(for="dealerName", class="block mb-1") Dealer's Name
      select(name="dealerName", id="dealerName", class="bg-transparent border-b border-white w-full py-1 text-black focus:outline-none focus:ring-1 focus:ring-cyan-400")
        option(disabled selected hidden)= editing ? produce.dealerName : 'Select Dealer'
        option(value="Maganjo Farm", selected=editing && produce.dealerName === 'Maganjo Farm') Maganjo Farm
        option(value="Matugga Farm", selected=editing && produce.dealerName === 'Matugga Farm') Matugga Farm
        option(value="Jane Agro", selected=editing && produce.dealerName === 'Jane Agro') Jane Agro
        option(value="GreenWorld Ltd", selected=editing && produce.dealerName === 'GreenWorld Ltd') GreenWorld Ltd
        option(value="Ben Produce", selected=editing && produce.dealerName === 'Ben Produce') Ben Produce
      span#dealerNameError.hidden.text-red-400.text-xs

    div
      label(for="branch", class="block mb-1") Branch Name
      input(type="text", name="branch", id="branch", value=editing ? produce.branch : branch, readonly, class="bg-transparent border-b border-white w-full py-1 text-white focus:outline-none")

    div
      label(for="contact", class="block mb-1") Dealer Contact
      input(type="tel", name="contact", id="contact", value=editing ? produce.contact : '', class="bg-transparent border-b border-white w-full py-1 focus:outline-none focus:ring-1 focus:ring-cyan-400")
      span#contactError.hidden.text-red-400.text-xs

    div
      label(for="salePrice", class="block mb-1") Selling Price (UGX)
      input(type="number", name="salePrice", id="salePrice", value=editing ? produce.salePrice : '', class="bg-transparent border-b border-white w-full py-1 focus:outline-none focus:ring-1 focus:ring-cyan-400")
      span#salePriceError.hidden.text-red-400.text-xs

    button(type="submit", class="col-span-full w-1/2 mx-auto mt-2 bg-cyan-400 text-white py-1.5 rounded-full shadow-md hover:bg-cyan-300 hover:text-[#004d73] transition-all duration-300")
      = editing ? 'Update Produce' : 'Submit'

  script(src="/js/procure.js")
