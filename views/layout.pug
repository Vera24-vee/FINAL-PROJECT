doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    title #{title}
    script(src="https://cdn.tailwindcss.com")
    link(href="https://fonts.googleapis.com/css2?family=Roboto&display=swap", rel="stylesheet")
    style.
      @keyframes gradientMotion {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
  body(class="min-h-screen bg-gradient-to-r from-[#004d73] via-[#007ba7] to-white bg-[length:400%_400%] animate-[gradientMotion_10s_ease_infinite] flex flex-col font-[Roboto]")

    //- //- Define role and branch safely from session
    //- - const role = typeof session !== 'undefined' && session.user ? session.user.role.toLowerCase() : '';
    //- - const branch = typeof session !== 'undefined' && session.user ? session.user.branch.toLowerCase() : '';

    //- Header
    header(class="bg-[#001f3f] text-white flex justify-between items-center px-6 py-3 shadow-md")
      h1(class="text-lg font-semibold") Karibu Groceries Ltd
      nav.flex.gap-4
        //- Role-based Dashboard redirection
        if role === 'manager'
          a(href=`/managerDash/${branch}`, class="hover:text-cyan-400 transition") Dashboard
        else if role === 'sales-agent'
          a(href=`/salesAgentDash/${branch}`, class="hover:text-cyan-400 transition") Dashboard
        else if role === 'director'
          a(href="/directorDash", class="hover:text-cyan-400 transition") Dashboard
        else
          a(href="/dashboard", class="hover:text-cyan-400 transition") Dashboard
        a(href="/logout", class="hover:text-cyan-400 transition") Logout

    //- Main Content Area
    main(class="flex-1 px-2 py-4 w-full flex justify-center items-center") 
      block content

    //- Footer
    footer(class="bg-[#001f3f] text-center text-white text-xs py-2")
      p Â© 2025 Karibu Groceries Ltd. All rights reserved.
      p(class="text-sm mt-1") Crafted by Verah Investments Ltd
